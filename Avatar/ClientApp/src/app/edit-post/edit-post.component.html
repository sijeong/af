<div style="margin: 50px">
  <form *ngIf="isNew || (article$ | async) as article  ; else loading " [formGroup]="form"
    [connectForm]="article$ | async" novalidate>
    <mat-card class="dashboard-card">
      <mat-card-header>
        <mat-card-title>Edit Article</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="row">
          <div class="col">
            <mat-form-field class="twenty-width">
              <mat-select placeholder="Category" formControlName="category" [(ngModel)]="selectedCategory"
                (selectionChange)="onCategoryChanged()">
                <mat-option *ngFor="let cat of keys(_category)" [value]="_category[cat]">
                  {{ cat }}
                </mat-option>
              </mat-select>
              <mat-error *ngIf="form.controls['category'].hasError('required')">
                category is <strong>required</strong>
              </mat-error>
            </mat-form-field>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <mat-form-field class="twenty-width">
              <mat-select placeholder="SubCategory" formControlName="subCategory">
                <!-- <div *ngif="_subCategoryParser(article$ | async).subCategory))">

                </div> -->
                <!-- <div *ngIf="(article$ | async) as article"> -->
                <!-- <div *ngIf="_subCategoryParser(article.subCategory)">
                    {{_subCategoryParser(article.subCategory)}}
                  </div> -->
                <div *ngIf="isNew">

                </div>
                <div *ngIf="!isNew">
                </div>
                <div *ngIf="selectedCategory == 'SC' || enumParser(article.subCategory, _articleScienceCategory)">
                  <mat-option *ngFor="let sub of keys(_articleScienceCategory)" [value]="_articleScienceCategory[sub]">
                    {{ sub }}
                  </mat-option>
                </div>
                <div *ngIf="selectedCategory == 'MT' || enumParser(article.subCategory, _articleMathematicsCategory)">
                  <mat-option *ngFor="let sub of keys(_articleMathematicsCategory)"
                    [value]="_articleMathematicsCategory[sub]">
                    {{ sub }}
                  </mat-option>
                </div>
                <div *ngIf="selectedCategory == 'LT' || enumParser(article.subCategory, _articleLiteratureCategory)">
                  <mat-option *ngFor="let sub of keys(_articleLiteratureCategory)"
                    [value]="_articleLiteratureCategory[sub]">
                    {{ sub }}
                  </mat-option>
                </div>
                <!-- </div> -->
              </mat-select>
            </mat-form-field>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <mat-form-field class="seventy-width">
              <input matInput placeholder="Title" type="string" formControlName="title">
            </mat-form-field>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <mat-form-field>
              <!-- <input matInput placeholder="date" type="string" formControlName="date"> -->
              <input matInput [matDatepicker]="picker" placeholder="Choose a date" formControlName="dateCreated">
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
          </div>
          <div class="col">
            <mat-form-field>
              <input matInput placeholder="Views" type="number" formControlName="viewCount">
            </mat-form-field>
          </div>
        </div>
        <div class="col">
          <ckeditor placeholder="Type the content here!" formControlName="content" #description skin="moono-lisa"
            [editor]="editor"></ckeditor>
        </div>
        <div *ngIf="!isNew" class="col">
          <button mat-button (click)="gotoList()">Go to List</button>
          <button (click)="save()" [disabled]="form.invalid" mat-raised-button color="primary">Save</button>
          <button (click)="delete(article)" mat-raised-button color="warn">Delete</button>
        </div>
        <div *ngIf="isNew" class="col">
          <button mat-button (click)="gotoList()">Cancel</button>
          <button (click)="create()" [disabled]="form.invalid" mat-raised-button color="primary">Create</button>

        </div>
        <!-- <anms-editor></anms-editor> -->
      </mat-card-content>
    </mat-card>
  </form>
</div>
<ng-template #loading>
  Loading Data...
</ng-template>
<pre>
    {{ article$ | async | json}}
</pre>
<pre>
{{form.value | json}}
</pre>
{{isNew}}